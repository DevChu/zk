<?taglib uri="http://www.zkoss.org/dsp/web/core" prefix="c"?>
<zk>
	<label multiline="true">
		1. Try click "add Module 1" or "add Module 2" several times.
		2. The submodule number increases.
		3. Close any Tab.
		4. The submodule number decreases.
	</label>
	<window
		viewModel="@id('vm') @init('org.zkoss.clientbind.test.mvvm.book.basic.Modulize')"
		width="500px">
		<vlayout>
			<hlayout>
				Total sub modules :
				<label id="moduleCount" value="@load(vm.modules.size())" />
			</hlayout>
			<hlayout>
				Total sub module value amount :
				<label id="moduleAmount" value="@load(vm.modulesAmount)" />
			</hlayout>
		</vlayout>
		<hlayout>
			<button id="addModule1" label="add Module 1"
				onClick="@command('addModule',type=1)" />
			<button id="addModule2" label="add Module 2"
				onClick="@command('addModule',type=2)" />
		</hlayout>
		---sub module--
		<tabbox>
			<tabs children="@load(vm.modules)">
				<template name="children">
					<tab label="@load(each.name)"
						selected="@load(vm.selected eq each)"
						onSelect="@command('selectModule',module=each)" closable="true"
						onClose="@command('removeModule',module=each)" />
				</template>
			</tabs>
			<tabpanels children="@load(vm.modules)">
				<template name="children">
					<tabpanel module="@ref(each)">
						<include src="@load('/mvvm/book/basic/' + each.uri)" />
					</tabpanel>
				</template>
			</tabpanels>
		</tabbox>
	</window>
</zk>